grub: intel_iommu=on
mkinitcpio: MODULES="aesni_intel usbhid xhci_hcd i915 nvidia vfio vfio_iommu_type1 vfio_pci vfio_virqfd"
pacman: ovmf

yoda /home/florent
❭ cat /etc/modprobe.d/
kvm.conf     nvidia.conf  vfio.conf    
yoda /home/florent
❭ cat /etc/modprobe.d/nvidia.conf 
blacklist nouveau
#blacklist nvidia
#blacklist nvidia_drm
#blacklist nvidia_modeset
yoda /home/florent
❭ cat /etc/modprobe.d/kvm.conf 
options kvm ignore_msrs=1
yoda /home/florent
❭ cat /etc/modprobe.d/vfio.conf 
#options vfio-pci ids=10de:13c2,10de:0fbb disable_vga=1
options vfio-pci disable_vga=1


<domain type='kvm' xmlns:qemu='http://libvirt.org/schemas/domain/qemu/1.0'>
  <memoryBacking>
    <hugepages/>
  </memoryBacking>
  <vcpu placement='static'>4</vcpu>
  <cputune>
    <vcpupin vcpu='0' cpuset='4'/>
    <vcpupin vcpu='1' cpuset='5'/>
    <vcpupin vcpu='2' cpuset='6'/>
    <vcpupin vcpu='3' cpuset='7'/>
  </cputune>
  <features>
    <hyperv>
      <vendor_id state='on' value='001bba222444'/>
    </hyperv>
    <kvm>
      <hidden state='on'/>
    </kvm>
  </features>
  <qemu:commandline>
    <qemu:env name='QEMU_AUDIO_DRV' value='pa'/>
    <qemu:env name='QEMU_PA_SERVER' value='/run/user/1000/pulse/native'/>
  </qemu:commandline>
</domain>

+ passthrough usb



https://wiki.archlinux.org/index.php/PCI_passthrough_via_OVMF
https://www.reddit.com/r/VFIO/comments/52ya06/return_nvidia_gpu_to_host/
https://arseniyshestakov.com/2016/03/31/how-to-pass-gpu-to-vm-and-back-without-x-restart/
https://fedoraproject.org/wiki/Features/KVM_Huge_Page_Backed_Memory
